import{_ as h,o as l,a as o,b as t,F as r,r as f,n as m,t as e,p as g,d as v,e as w}from"./index-ff0d6d14.js";const b={components:{},data(){return{roles:new Map([["11.1223",{id:"11.1223",login:"bmhoang",name:"Ngan",group:"Ngan,online",class:"TK",level:105,server:"TL",isDefault:!0,status:"waiting",lastUpdated:"2023-05-01 11:11:11"}]]),message:"",lastUpdated:0}},methods:{async loadData(){fetch("https://pi.hoang.uk/pwtools/roles?last="+this.lastUpdated,{credentials:"include"}).then(async a=>{if(!a.ok)return Promise.reject("code "+a.status+", "+a.statusText);(await a.json()).roles.entries().forEach((c,n)=>{n.lastUpdated>this.lastUpdated&&(this.lastUpdated=n.lastUpdated),this.roles.set(c,n)})}).catch(a=>{console.error("There was an error!",a)}),setTimeout(this.loadData,1e4)},async start(a){this.lastUpdated=Math.floor(Date.now()/1e3),console.log("starting "+a)},async stop(a){console.log("stoping "+a)}},mounted(){this.loadData()}},d=a=>(g("data-v-1aba5f2a"),a=a(),v(),a),U=d(()=>t("h2",{class:"content__title"},[t("i",{class:"fa fa-music"}),w(" PW Roles ")],-1)),y={class:"content__wrapper"},k=d(()=>t("thead",null,[t("tr",null,[t("th",null,"Login"),t("th",null,"Name"),t("th",null,"Group"),t("th",null,"Last Updated"),t("th",null,"Acts")])],-1)),D={class:"act-menu"},x=d(()=>t("a",null,[t("span",{class:"fa fa-bars button",style:{padding:"0 1.5rem",width:"5rem"}})],-1)),S={class:"act-dropdown"},T=["onClick"],C=["onClick"];function N(a,u,c,n,p,i){return l(),o(r,null,[U,t("div",y,[t("table",null,[k,t("tbody",null,[(l(!0),o(r,null,f(p.roles.values(),s=>(l(),o("tr",{class:m([s.status,s.isDefault?"bold":""])},[t("td",null,e(s.login),1),t("td",null,e(s.name)+"("+e(s.class)+"-"+e(s.level)+")["+e(s.server)+"]",1),t("td",null,e(s.group),1),t("td",null,e(s.lastUpdated),1),t("td",D,[x,t("div",S,[t("a",{onClick:_=>i.start(s.id)},"Start",8,T),t("a",{onClick:_=>i.stop(s.id)},"Stop",8,C)])])],2))),256))])])])],64)}const L=h(b,[["render",N],["__scopeId","data-v-1aba5f2a"]]);export{L as default};
